!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return o=function(){return e},e}var i=.04,u=.11;window.addEventListener("touchmove",function(){});var r=function e(t){function r(){M.call(b,G,H)}function c(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var t=c(e);N||Q||(N=!0,W=!1,k=t.id,R=V=t.x,U=j=t.y,Z=[],m(R,U),document.addEventListener("touchmove",a,!!o()&&{passive:!1}),document.addEventListener("touchend",f),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",a,!!o()&&{passive:!1}),document.addEventListener("mouseup",f),x("impetus-start"))}function a(e){e.preventDefault();var t=c(e);N&&t.id===k&&(V=t.x,j=t.y,m(R,U),p())}function f(e){var t=c(e);N&&t.id===k&&v()}function v(){N=!1,m(R,U),w(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",a),x("impetus-stop")}function m(e,t){for(var n=Date.now();Z.length>0&&!(n-Z[0].time<=100);)Z.shift();Z.push({x:e,y:t,time:n})}function l(){var e=V-R,t=j-U;if(G+=e*T,H+=t*T,F){var n=y();0!==n.x&&(G-=e*h(n.x)*T),0!==n.y&&(H-=t*h(n.y)*T)}else y(!0);r(),R=V,U=j,K=!1}function h(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function p(){K||s(l),K=!0}function y(e){var t=0,n=0;return void 0!==I&&G<I?t=I-G:void 0!==P&&G>P&&(t=P-G),void 0!==S&&H<S?n=S-H:void 0!==D&&H>D&&(n=D-H),e&&(0!==t&&(G=t>0?I:P),0!==n&&(H=n>0?S:D)),{x:t,y:n,inBounds:0===t&&0===n}}function w(){var e=Z[0],t=Z[Z.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/T;z=n/u||0,O=o/u||0;var r=y();(Math.abs(z)>1||Math.abs(O)>1||!r.inBounds)&&(W=!0,s(E))}function E(){if(W){z*=q,O*=q,G+=z,H+=O;var e=y();if(Math.abs(z)>J||Math.abs(O)>J||!e.inBounds){if(F){if(0!==e.x)if(e.x*z<=0)z+=e.x*i;else{var t=e.x>0?2.5:-2.5;z=(e.x+t)*u}if(0!==e.y)if(e.y*O<=0)O+=e.y*i;else{var t=e.y>0?2.5:-2.5;O=(e.y+t)*u}}else 0!==e.x&&(G=e.x>0?I:P,z=0),0!==e.y&&(H=e.y>0?S:D,O=0);r(),s(E)}else W=!1}}function x(e,t){if(t=t||{},window.CustomEvent)var n=new CustomEvent(e,{detail:t});else{var n=document.createEvent(e);n.initCustomEvent(e,!0,!0,t)}el.dispatchEvent(n)}var L=t.source,b=void 0===L?document:L,M=t.update,g=t.multiplier,T=void 0===g?1:g,B=t.friction,q=void 0===B?.92:B,C=t.initialValues,X=t.boundX,Y=t.boundY,A=t.bounce,F=void 0===A||A;n(this,e);var I,P,S,D,R,U,V,j,k,z,O,G=0,H=0,J=.3*T,K=!1,N=!1,Q=!1,W=!1,Z=[];!function(){if(!(b="string"==typeof b?document.querySelector(b):b))throw new Error("IMPETUS: source not found.");if(!M)throw new Error("IMPETUS: update function not defined.");C&&(C[0]&&(G=C[0]),C[1]&&(H=C[1]),r()),X&&(I=X[0],P=X[1]),Y&&(S=Y[0],D=Y[1]),b.addEventListener("touchstart",d),b.addEventListener("mousedown",d)}(),this.destroy=function(){return b.removeEventListener("touchstart",d),b.removeEventListener("mousedown",d),null},this.pause=function(){N=!1,Q=!0},this.resume=function(){Q=!1},this.setValues=function(e,t){"number"==typeof e&&(G=e),"number"==typeof t&&(H=t)},this.setMultiplier=function(e){T=e,J=.3*T},this.setBoundX=function(e){I=e[0],P=e[1]},this.setBoundY=function(e){S=e[0],D=e[1]}};t.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});